<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
    <link rel="stylesheet" type="text/css" href="../css/aui-slide.css" />
    <style>
        html,
        body {
            height: 100%;
            min-height: 100%;
        }

        section {
            height: 100%;
        }

        .info-name {
            box-sizing: border-box;
            width: 100%;
            height: 61px;
            padding-top: 8px;
            padding-left: 8px;
            border-bottom: 1px solid #ddd;
        }

        .info-name .name {
            width: 100%;
            height: 24px;
            line-height: 24px;
            color: #444;
            font-size: 18px;
        }

        .info-name .description {
            width: 100% height: 20px;
            line-height: 20px;
            color: #888;
            font-size: 14px;
        }

        .info-price {
            box-sizing: border-box;
            width: 100%;
            height: 61px;
            padding-top: 8px;
            padding-left: 8px;
            border-bottom: 1px solid #ddd;
        }

        .info-price .price {
            width: 100%;
            height: 24px;
            line-height: 24px;
            color: #e3007f;
            font-size: 24px;
            font-weight: bolder;
        }

        .info-price .other {
            display: -webkit-box;
            display: -webkit-flex;
            display: flex;
            -webkit-box-orient: horizontal;
            -webkit-flex-flow: row;
            flex-flow: row;
            width: 100%;
            height: 20px;
        }

        .info-price .other div {
            width: 100%;
            height: 20px;
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            flex: 1;
            line-height: 20px;
            font-size: 14px;
            color: #888;
        }

        .info-price .other .origin-price {
            box-sizing: border-box;
            padding-left: 8px;
            text-align: left;
        }

        .info-price .other .unit {
            box-sizing: border-box;
            text-align: center;
        }

        .info-price .other .place {
            box-sizing: border-box;
            padding-right: 16px;
            text-align: right;
        }

        .info-discount {
            box-sizing: border-box;
            width: 100%;
            height: 40px;
            border-bottom: 1px solid #ddd;
        }

        .info-discount .name {
            display: inline-block;
            width: auto;
            height: 15px;
            margin-top: 8px;
            margin-left: 8px;
            color: #444;
        }

        .info-discount .value {
            display: inline-block;
            width: auto;
            height: 24px;
            line-height: 15px;
            margin-top: 3px;
            padding: 4px;
            border-radius: 15px;
            box-shadow: 0 1px 1px 1px #eee;
            color: #fff;
            background-color: #e3007f;
        }

        .push {
            position: relative;
            box-sizing: border-box;
            padding-top: 8px;
            width: 100%;
            height: 60px;
            text-align: center;
            color: #888;
            font-size: 12px;
        }

        .push .top {
            height: 24px;
            line-height: 24px;
        }

        .push .bottom {
            height: 20px;
            line-height: 20px;
        }

        .picture {
            height: auto;
            width: auto;
        }

        .picture img {
            width: 90%;
            height: auto;
            margin: 0 auto;
        }
        /*滚动图片*/

        #aui-slide {
            overflow: hidden;
        }

        .aui-slide-node {
            width: 100%;
            height: 100%;
        }

        .aui-slide-node img {
            margin: 0 auto;
            width: auto;
            height: auto;
            /*宽度 自适应*/
            max-width: 100%;
            /*高度 百分百*/
            max-height: 100%;
        }

        .dis {
            display: none;
        }
    </style>
</head>

<body>
    <section>
        <div id="aui-slide">
            <div id="swiplist" class="aui-slide-wrap">

            </div>
            <div class="aui-slide-page-wrap">
                <!--分页容器-->
            </div>
        </div>
        <div class="info-name">
            <div id="wareName" class="name">商品名:</div>
            <div id="description" class="description">商品描述:</div>
        </div>
        <div class="info-price">
            <div id="price" class="price">¥18.9</div>
            <div class="other">
                <div class="origin-price">
                    <del id="originPrice">原价：</del>
                </div>
                <div id="stock" class="place">销量：0件</div>
            </div>
        </div>
        <div   class="info-discount">
            <div class="name">优惠：</div>
            <div id="discount" class="value">可参与</div>
        </div>
        <div id="jiepic0" class="picture">
            <img  src="../image/default_square.png" />
        </div>
        <div id="jiepic1" class="picture">
            <img  src="../image/default_square.png" />
        </div>
        <div id="jiepic2"  class="picture">
            <img src="../image/default_square.png" />
        </div>
        <div id="jiepic3" class="picture">
            <img src="../image/default_square.png" />
        </div>
        <div id="jiepic4"  class="picture">
            <img src="../image/default_square.png" />
        </div>
        <div id="jiepic5" class="picture">
            <img src="../image/default_square.png" />
        </div>
        <div id="jiepic6" class="picture">
            <img src="../image/default_square.png" />
        </div>
        <div id="jiepic7" class="picture">
            <img src="../image/default_square.png" />
        </div>
        <div  id="jiepic8" class="picture">
            <img src="../image/default_square.png" />
        </div>
        <div  id="jiepic9" class="picture">
            <img src="../image/default_square.png" />
        </div>


        <!--  <div class="push">
            <div class="top">""</div>
            <div class="bottom">下滑查看商品详情</div>
        </div>-->
    </section>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/SHA1.js"></script>
<script type="text/javascript" src="../script/remotedb.js"></script>
<script type="text/javascript" src="../script/sha1.min.js"></script>
<script type="text/javascript" src="../script/download.js"></script>
<script type="text/javascript" src="../script/aui-slide.js"></script>
<script type="text/javascript">
    apiready = function() {
        // 获取商品详情数据
        getWareInfo(api.pageParam.wareId);
    };

    function getWareInfo(wareId_) {
        api.showProgress({
            style: 'default',
            animationType: 'fade',
            title: '努力加载中...',
            text: '请稍候...',
            modal: false
        });
        var filter = {
            where: {
                'Id': wareId_
            },
            skip: 0,
            limit: 1
        }
        fnGet('Spl_Ware/GetByID', filter, function(ret, err) {
            if (ret && ret.type != 0) {
                //  console.log(JSON.stringify(ret));
                api.hideProgress();
                // 更新商品详情展示
                fnUpdateWareInfo(ret);
            }

        });
    }

    // 更新商品详情展示
    function fnUpdateWareInfo(ware_) {

        // 商品名称
        var wareName = $api.byId('wareName');
        wareName.innerHTML = ware_.Name;

        // 商品描述
        var description = $api.byId('description');
        description.innerHTML = ware_.Description;

        // 商品价格
        var price = $api.byId('price');
        price.innerHTML = '价格：￥ ' + ware_.PromotionPrice;
        //商品原价
        var originPrice = $api.byId('originPrice');
        if (ware_.Price != null) {
            originPrice.innerHTML = '原价：￥ ' + ware_.Price;
        }

        //销售
        var stock = $api.byId('stock');
        if (ware_.Stock != null) {
            stock.innerHTML = '销量： ' + ware_.Stock;
        }
        //优惠活动
        var discount = $api.byId('discount');
        if (ware_.YTypeName) {
            discount.innerHTML += ware_.YTypeName;
        } else {
            discount.innerHTML = '无';
        }

        //图片介绍
        var pic0 = $api.byId('jiepic0');
        var pic1 = $api.byId('jiepic1');
        var pic2 = $api.byId('jiepic2');
        var pic3 = $api.byId('jiepic3');
        var pic4 = $api.byId('jiepic4');
        var pic5 = $api.byId('jiepic5');
        var pic6 = $api.byId('jiepic6');
        var pic7 = $api.byId('jiepic7');
        var pic8 = $api.byId('jiepic8');
        var pic9 = $api.byId('jiepic9');

        if (ware_.JiePic0!=null) {
            fnLoadImage(pic0, ware_.JiePic0);
        } else {
            pic0.display = 'none';
        }
        if (ware_.JiePic1!=null) {
            fnLoadImage(pic1, ware_.JiePic1);
        } else {
            pic1.display = 'none';
        }
        if (ware_.JiePic2!=null) {
            fnLoadImage(pic2, ware_.JiePic2);
        } else {
            pic2.display = 'none';
        }
        if (ware_.JiePic3!=null) {
            fnLoadImage(pic3, ware_.JiePic3);
            //pic3.src = ware_.Picture3;
        } else {
            pic3.display = 'none';
        }
        if (ware_.JiePic4!=null) {
            fnLoadImage(pic4, ware_.JiePic4);
        } else {
            pic4.display = 'none';
        }
        if (ware_.JiePic5!=null) {
            fnLoadImage(pic5, ware_.JiePic5);
        } else {
            pic5.display = 'none';
        }
        if (ware_.JiePic6!=null) {
            fnLoadImage(pic6, ware_.JiePic6);
        } else {
            pic6.display = 'none';
        }
        if (ware_.JiePic7!=null) {
            fnLoadImage(pic7, ware_.JiePic7);
        } else {
            pic7.display = 'none';
        }
        if (ware_.JiePic8!=null) {
            fnLoadImage(pic8, ware_.JiePic8);
        } else {
            pic8.display = 'none';
        }
        if (ware_.JiePic9!=null) {
            fnLoadImage(pic9, ware_.JiePic9);
        } else {
            pic9.display = 'none';
        }
        // 更新轮播图中的图片
        if (ware_.MainPicture0) {
            fnLoadOnlyImage(ware_.MainPicture0, function(path_, ret, err) {
                getpath(path_);
            });
        }
        if (ware_.MainPicture1) {
            fnLoadOnlyImage(ware_.MainPicture1, function(path_, ret, err) {
                getpath(path_);
            });
        }
        if (ware_.MainPicture2) {
            fnLoadOnlyImage(ware_.MainPicture2, function(path_, ret, err) {
                getpath(path_);
            });
        }
        if (ware_.MainPicture3) {
            fnLoadOnlyImage(ware_.MainPicture3, function(path_, ret, err) {
                getpath(path_);
            });
        }
        if (ware_.MainPicture4) {
            fnLoadOnlyImage(ware_.MainPicture4, function(path_, ret, err) {
                getpath(path_);
            });
        }
        if (ware_.MainPicture5) {
            fnLoadOnlyImage(ware_.MainPicture5, function(path_, ret, err) {
                getpath(path_);
            });
        }
    }
    var swiplist = $api.byId('swiplist');
    var tmp = '';

    function getpath(path) {
        if (path != null) {
            tmp += "<div class='aui-slide-node'><img  src='" + path + "'/></div>"
        }
        swiplist.innerHTML = tmp;
        fnAuiSlide();
    }

    function fnAuiSlide() {
        var slide = new auiSlide({
            //      指定 获取当前页的函数  必须实现
            //  currentPage:currentFun,
            //      获取最外层div元素
            "container": document.getElementById("aui-slide"),
            //"width":120,
            //      高度
            "height": 260,
            //      速度
            "speed": 300,
            //自动播放
            "autoPlay": 3000,
            //      是否显示
            "pageShow": true,
            //      点风格显示
            "pageStyle": 'dot',
            //      是否循环 滚动
            "loop": true,
            //      点的位置
            "dotPosition": 'center',
        });
    }
</script>

</html>
